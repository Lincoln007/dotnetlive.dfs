@{
    ViewData["Title"] = "Home Page";
}
<h1><a href="/swagger">文档</a></h1>


<h1>测试：</h1>
<form action="/File/Upload" method="post" enctype="multipart/form-data">
    <input type="file" name="testFile" id="testFile" />
    <input type="submit" value="上传" />
    <input type="button" id="btnUpload" value="ajax上传" />
</form>
<div id="result">

</div>
<img />
@section Scripts{
    <script>
        $(function () {
            $("#btnUpload").click(function () {
                var fileUpload = $("#testFile").get(0);
                var files = fileUpload.files;
                var data = new FormData();
                for (var i = 0; i < files.length; i++) {
                    data.append(files[i].name, files[i]);
                }
                var $result = $("#result");
                $.ajax({
                    type: "POST",
                    url: "/api/file/upload",
                    contentType: false,
                    processData: false,
                    data: data,
                    success: function (res) {
                        if (res.success) {
                            $.each(res.files, function (i, file) {
                                console.log(file);
                                $result.append($("<img src='/api/file/" + file.id + "' />"));
                            });
                        }
                    }
                });
            });
        });

    </script>

}


